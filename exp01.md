# 0 基础，开发基于 khl.py 的 KOOK 机器人

## 第一章  准备工作

### 1-1  开发环境

欢迎阅读这篇 KOOK 机器人开发教程，即使你没有任何编程基础，你也可以编写出好用的机器人。
准备材料：

1. 浏览器（Edge，谷歌，火狐等等）；

2. Python 3.10 环境；

3. Python 编辑器（PyCharm，VsCode，Vim 等等）。

首先，你要有一个流畅的浏览器方便后期编写东西时更方便。
接下来，[Python 官网](https://www.python.org/) 下载 Python 3.10，当前 Python 3.10 支持大部分库。有了地基接下来开始去拿建筑材料了（不同 Python 版本的兼容性不同，不一定每个版本都有您需要的包，所以如果有具体的需求可以根据需求选择尽量新的 Python 版本）。
PyCharm 是一个很好的建筑材料，具有大部分的功能，能让你编写的更加顺利 [PyCharm](https://www.jetbrains.com/pycharm/)。
有了地基和建筑材料，接下来就可以开始机器人代码的编写了。

### 1-2  准备环境

​在正式开发之前，我们在 PyCharm 找到 file-setting-plugins 搜索 `Chinese` 插件进行安装并重启，你就能得到一个汉化版的 PyCharm了 :smile:。
​接下来我们要拥有 khl.py 这个包,你可以使用 `pip3 install khl.py` 进行安装或者用 PyCharm 的 Python Packages 进行安装。

### 1-3  （可选）安装其他包

在我们之后的学习中，我们需要更多的 Python 第三方包来使用，以下是一些可能用到的包：
本地轻量化数据库 `TinyDB`：
    这个包在你学完 Python 基础语法后就可以使用它。
    TinyDB 数据库是由纯 Python 编写，易上手。
    安装命令：`pip install tinydb`。

异步爬取 `aiohttp`：

    这个包支持异步爬取，同样可以使用 `pip install aiohttp` 命令安装。

    上手有些小难度，但是由于支持异步的特性，十分常用。

### 1-4  获取 token

首先，`token` 是做什么的呢？

> `token` 类似于一个 `id`，每个合法的（即正确的） `token`，对应唯一一个机器人。这个 `token` 可以让 KOOK 识别出你编写的是机器人，并给予你与机器人交互、编写机器人代码的权限，例如让机器人发送消息等。

在我们获取 `token` 之前，我们先要拿到开发者身份，这个十分简单。

1. 打开 KOOK；

2. 打开左下角的个人设置；

3. 向下找到高级设置。

这样你就可以打开开发者面板了。

接下来我们要创建一个机器人并获取其 `token`。

1. 打开[机器人管理](https://developer.kookapp.cn/app/index)这个网址；

2. 新建应用；

3. 输入您的机器人名称；

4. 点击机器人头像，打开机器人设置；

5. 打开机器人栏目；

6. 复制 `token`。

这样子我们就得到这个机器人对应的 `token` 啦。值得注意的是，`token` 刷新后旧 `token` 会失效，但同时可以有效防止 `token` 泄露后没有办法解决的问题。
